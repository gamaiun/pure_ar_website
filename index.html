<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AR Objects with GPS</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>
  <body>
    <a-scene
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="logarithmicDepthBuffer: true;"
    >
      <!-- Camera with GPS tracking -->
      <a-camera gps-camera rotation-reader position="0 1.6 0"> </a-camera>

      <!--  Shpere - 2 meters northwest (x=-2, z=-2), scaled down -->
      <a-box id="sphere" position="-2 0.5 -2" scale="1 1 1" color="yellow">
      </a-box>

      <!-- <a-sphere id="sphere" position="1 0.5 -1" radius="0.3" color="pink">
      </a-sphere> -->

      <!-- Floor plane for reference -->
      <a-plane
        position="0 0 0"
        rotation="-90 0 0"
        width="20"
        height="20"
        color="red"
        opacity="0.5"
      >
      </a-plane>
    </a-scene>

    <script>
      window.onload = () => {
        const scene = document.querySelector("a-scene");
        const cube = document.querySelector("#cube");
        const sphere = document.querySelector("#sphere");

        scene.addEventListener("loaded", () => {
          console.log("Scene loaded");

          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
              (position) => {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                console.log(`Your location: Lat ${latitude}, Lon ${longitude}`);

                cube.setAttribute("gps-entity-place", {
                  latitude: latitude,
                  longitude: longitude,
                });
                sphere.setAttribute("gps-entity-place", {
                  latitude: latitude,
                  longitude: longitude,
                });
              },
              (error) => {
                console.error("GPS Error:", error.message);
              },
              { enableHighAccuracy: true }
            );
          } else {
            console.error("Geolocation not supported.");
          }
        });
      };
    </script>
  </body>
</html>
